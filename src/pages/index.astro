---
import DiscordPresence from '@/components/bento/DiscordPresence.tsx'
import GithubCalendar from '@/components/bento/GithubCalendar.tsx'
import SpotifyPresence from '@/components/bento/SpotifyPresence.tsx'
import WakatimeGraph from '@/components/bento/WakatimeGraph.tsx'
import Link from '@/components/Link.astro'
import { SITE, SOCIAL_LINKS } from '@/consts'
import Layout from '@/layouts/Layout.astro'
import { Icon } from 'astro-icon/components'
import { getCollection } from 'astro:content'
import Container from '../components/Container.astro'
import SocialIcons from '../components/SocialIcons.astro'

const latestPost = await getCollection('blog').then((posts) =>
  posts
    .sort(
      (a, b) =>
        new Date(b.data.date).getTime() - new Date(a.data.date).getTime(),
    )
    .filter((post) => !post.data.hidden && !post.data.draft)
    .at(0),
)
---

<Layout title="Home | Huynh Dang Khoa" description="Huynh Dang Khoa - Software Engineer, Data Scientist and AI Enthusiast">
  <Container class="py-20">
    <!-- Hero Section -->
    <div class="flex flex-col items-center justify-center text-center mb-16">
      <div class="w-32 h-32 md:w-40 md:h-40 rounded-full border-4 border-primary/20 overflow-hidden mb-6 shadow-xl">
        <img 
          src="/profile.jpg" 
          alt="Huynh Dang Khoa" 
          class="w-full h-full object-cover"
          onerror="this.onerror=null; this.src='https://ui-avatars.com/api/?name=Huynh+Dang+Khoa&background=2196f3&color=fff&size=200';"
        />
      </div>
      <h1 class="text-4xl md:text-5xl font-bold mb-2 text-gradient">Huynh Dang Khoa</h1>
      <p class="text-xl text-muted-foreground mb-4">Software Engineer & Data Scientist</p>
      <SocialIcons links={SOCIAL_LINKS} className="justify-center mb-6" />
      <p class="max-w-2xl text-muted-foreground">
        I'm a passionate technologist focused on AI, Machine Learning, and Software Engineering.
        Driven by innovation and solving complex problems with data-driven solutions.
      </p>
      <div class="flex flex-wrap gap-4 justify-center mt-8">
        <a 
          href="/about" 
          class="inline-flex items-center gap-2 px-6 py-3 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors"
        >
          <Icon name="lucide:user" class="h-4 w-4" />
          About Me
        </a>
        <a 
          href="/projects" 
          class="inline-flex items-center gap-2 px-6 py-3 bg-secondary text-secondary-foreground rounded-md hover:bg-secondary/90 transition-colors"
        >
          <Icon name="lucide:code" class="h-4 w-4" />
          View Projects
        </a>
      </div>
    </div>

    <!-- Highlighted Skills Section -->
    <div class="mb-20">
      <h2 class="text-2xl font-bold mb-8 text-center">Technical Expertise</h2>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <div class="bg-card rounded-lg p-6 shadow-sm border hover:shadow-md transition-shadow">
          <div class="bg-primary/10 p-3 rounded-full w-fit mb-4">
            <Icon name="lucide:brain" class="h-6 w-6 text-primary" />
          </div>
          <h3 class="text-xl font-semibold mb-2">AI & Machine Learning</h3>
          <p class="text-muted-foreground">
            Experienced in deep learning, NLP, computer vision, and developing
            AI-powered solutions for real-world problems.
          </p>
        </div>
        
        <div class="bg-card rounded-lg p-6 shadow-sm border hover:shadow-md transition-shadow">
          <div class="bg-primary/10 p-3 rounded-full w-fit mb-4">
            <Icon name="lucide:database" class="h-6 w-6 text-primary" />
          </div>
          <h3 class="text-xl font-semibold mb-2">Data Science</h3>
          <p class="text-muted-foreground">
            Skilled in data analysis, visualization, statistical modeling, and extracting
            actionable insights from complex datasets.
          </p>
        </div>
        
        <div class="bg-card rounded-lg p-6 shadow-sm border hover:shadow-md transition-shadow">
          <div class="bg-primary/10 p-3 rounded-full w-fit mb-4">
            <Icon name="lucide:code" class="h-6 w-6 text-primary" />
          </div>
          <h3 class="text-xl font-semibold mb-2">Software Engineering</h3>
          <p class="text-muted-foreground">
            Proficient in full-stack development, system architecture, and building
            scalable applications with modern technologies.
          </p>
        </div>
      </div>
    </div>

    <!-- Featured Projects Section -->
    <div class="mb-20">
      <h2 class="text-2xl font-bold mb-8 text-center">Featured Projects</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <div class="bg-card rounded-lg overflow-hidden border shadow-sm hover:shadow-md transition-shadow">
          <div class="aspect-video bg-muted overflow-hidden">
            <img 
              src="/horses-cows.jpg" 
              alt="Classify Horses and Cows" 
              class="w-full h-full object-cover transition-transform hover:scale-105"
              onerror="this.onerror=null; this.src='https://placehold.co/600x400/2196f3/ffffff?text=AI+Classification';"
            />
          </div>
          <div class="p-6">
            <h3 class="text-xl font-semibold mb-2">Classify Horses and Cows</h3>
            <p class="text-muted-foreground mb-4">
              Image classification project using EfficientNetB7 deep learning network with 97% accuracy.
            </p>
            <div class="flex gap-2 flex-wrap mb-4">
              <span class="px-2 py-1 bg-primary/10 text-primary rounded-md text-xs">Python</span>
              <span class="px-2 py-1 bg-primary/10 text-primary rounded-md text-xs">TensorFlow</span>
              <span class="px-2 py-1 bg-primary/10 text-primary rounded-md text-xs">Computer Vision</span>
            </div>
            <a href="https://drive.google.com/drive/folders/1X-xfm92FVwLajgr-c5sSBW8DFWmbUtNQ?usp=sharing" target="_blank" rel="noopener noreferrer" class="text-primary hover:underline inline-flex items-center">
              View Project
              <Icon name="lucide:arrow-right" class="ml-1 h-4 w-4" />
            </a>
          </div>
        </div>
        
        <div class="bg-card rounded-lg overflow-hidden border shadow-sm hover:shadow-md transition-shadow">
          <div class="aspect-video bg-muted overflow-hidden">
            <img 
              src="/video-retrieval.jpg" 
              alt="Video Retrieval from Text" 
              class="w-full h-full object-cover transition-transform hover:scale-105"
              onerror="this.onerror=null; this.src='https://placehold.co/600x400/2196f3/ffffff?text=Video+Retrieval';"
            />
          </div>
          <div class="p-6">
            <h3 class="text-xl font-semibold mb-2">Video Retrieval from Text</h3>
            <p class="text-muted-foreground mb-4">
              System enabling video search based on text descriptions using CLIP embeddings and FAISS.
            </p>
            <div class="flex gap-2 flex-wrap mb-4">
              <span class="px-2 py-1 bg-primary/10 text-primary rounded-md text-xs">Python</span>
              <span class="px-2 py-1 bg-primary/10 text-primary rounded-md text-xs">CLIP</span>
              <span class="px-2 py-1 bg-primary/10 text-primary rounded-md text-xs">FAISS</span>
            </div>
            <a href="https://drive.google.com/drive/folders/1ZyYjAKhvJfzq0GwFXTETDLycvO3wZtA1?usp=drive_link" target="_blank" rel="noopener noreferrer" class="text-primary hover:underline inline-flex items-center">
              View Project
              <Icon name="lucide:arrow-right" class="ml-1 h-4 w-4" />
            </a>
          </div>
        </div>
        
        <div class="bg-card rounded-lg overflow-hidden border shadow-sm hover:shadow-md transition-shadow">
          <div class="aspect-video bg-muted overflow-hidden">
            <img 
              src="/flappy-bird.jpg" 
              alt="Flappy Bird" 
              class="w-full h-full object-cover transition-transform hover:scale-105"
              onerror="this.onerror=null; this.src='https://placehold.co/600x400/2196f3/ffffff?text=Flappy+Bird';"
            />
          </div>
          <div class="p-6">
            <h3 class="text-xl font-semibold mb-2">Flappy Bird</h3>
            <p class="text-muted-foreground mb-4">
              Classic Flappy Bird game implementation using Python and Pygame.
            </p>
            <div class="flex gap-2 flex-wrap mb-4">
              <span class="px-2 py-1 bg-primary/10 text-primary rounded-md text-xs">Python</span>
              <span class="px-2 py-1 bg-primary/10 text-primary rounded-md text-xs">Pygame</span>
              <span class="px-2 py-1 bg-primary/10 text-primary rounded-md text-xs">Game Development</span>
            </div>
            <a href="https://drive.google.com/drive/folders/1BfzibofyYlzwfiRyRD4ZkAwOXECOwnkt?usp=sharing" target="_blank" rel="noopener noreferrer" class="text-primary hover:underline inline-flex items-center">
              View Project
              <Icon name="lucide:arrow-right" class="ml-1 h-4 w-4" />
            </a>
          </div>
        </div>
        
        <div class="bg-card rounded-lg overflow-hidden border shadow-sm hover:shadow-md transition-shadow">
          <div class="aspect-video bg-muted overflow-hidden">
            <img 
              src="/chatbot.jpg" 
              alt="Mental Health Chatbot" 
              class="w-full h-full object-cover transition-transform hover:scale-105"
              onerror="this.onerror=null; this.src='https://placehold.co/600x400/2196f3/ffffff?text=AI+Chatbot';"
            />
          </div>
          <div class="p-6">
            <h3 class="text-xl font-semibold mb-2">Mental Health Chatbot</h3>
            <p class="text-muted-foreground mb-4">
              AI-powered chatbot for mental health support using Streamlit and advanced NLP techniques.
            </p>
            <div class="flex gap-2 flex-wrap mb-4">
              <span class="px-2 py-1 bg-primary/10 text-primary rounded-md text-xs">Python</span>
              <span class="px-2 py-1 bg-primary/10 text-primary rounded-md text-xs">Streamlit</span>
              <span class="px-2 py-1 bg-primary/10 text-primary rounded-md text-xs">NLP</span>
            </div>
            <a href="https://drive.google.com/drive/folders/18JLhpH8sFnZmD6Yf06nxKCNGBZDKK8q5?usp=drive_link" target="_blank" rel="noopener noreferrer" class="text-primary hover:underline inline-flex items-center">
              View Project
              <Icon name="lucide:arrow-right" class="ml-1 h-4 w-4" />
            </a>
          </div>
        </div>
        
        <div class="bg-card rounded-lg overflow-hidden border shadow-sm hover:shadow-md transition-shadow">
          <div class="aspect-video bg-muted overflow-hidden">
            <img 
              src="/cem-rl.jpg" 
              alt="CEM-RL" 
              class="w-full h-full object-cover transition-transform hover:scale-105"
              onerror="this.onerror=null; this.src='https://placehold.co/600x400/2196f3/ffffff?text=Reinforcement+Learning';"
            />
          </div>
          <div class="p-6">
            <h3 class="text-xl font-semibold mb-2">CEM-RL</h3>
            <p class="text-muted-foreground mb-4">
              Implementation of Cross-Entropy Method for Reinforcement Learning with advanced optimization techniques.
            </p>
            <div class="flex gap-2 flex-wrap mb-4">
              <span class="px-2 py-1 bg-primary/10 text-primary rounded-md text-xs">Python</span>
              <span class="px-2 py-1 bg-primary/10 text-primary rounded-md text-xs">RL</span>
              <span class="px-2 py-1 bg-primary/10 text-primary rounded-md text-xs">Optimization</span>
            </div>
            <a href="https://drive.google.com/drive/folders/1NvmmCrwwxHBtfZoX4UMCuiMQAw4KyEOZ?usp=drive_link" target="_blank" rel="noopener noreferrer" class="text-primary hover:underline inline-flex items-center">
              View Project
              <Icon name="lucide:arrow-right" class="ml-1 h-4 w-4" />
            </a>
          </div>
        </div>
      </div>
      
      <div class="text-center mt-8">
        <a 
          href="/projects" 
          class="inline-flex items-center gap-2 px-6 py-3 bg-muted hover:bg-muted/80 text-foreground rounded-md transition-colors"
        >
          View All Projects
          <Icon name="lucide:arrow-right" class="h-4 w-4" />
        </a>
      </div>
    </div>
    
    <!-- Latest Blog Post (if available) -->
    {latestPost && (
      <div class="mb-20">
        <h2 class="text-2xl font-bold mb-8 text-center">Latest Article</h2>
        <div class="bg-card rounded-lg overflow-hidden border shadow-sm hover:shadow-md transition-shadow max-w-2xl mx-auto">
          <div class="aspect-video bg-muted">
            <img 
              src={latestPost.data.image?.src ?? '#'} 
              alt={`Featured image for: ${latestPost.data.title}`}
              class="w-full h-full object-cover"
              onerror="this.onerror=null; this.src='https://placehold.co/800x450/2196f3/ffffff?text=Blog+Post';"
            />
          </div>
          <div class="p-6">
            <h3 class="text-xl font-semibold mb-2">{latestPost.data.title}</h3>
            <p class="text-muted-foreground mb-4">{latestPost.data.description || 'Check out my latest blog post.'}</p>
            <a 
              href={`/blog/${latestPost.id}`} 
              class="inline-flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors"
            >
              Read Article
              <Icon name="lucide:arrow-right" class="h-4 w-4" />
            </a>
          </div>
        </div>
      </div>
    )}
    
    <!-- Contact Section -->
    <div class="bg-card rounded-lg p-8 shadow-sm border text-center max-w-2xl mx-auto">
      <h2 class="text-2xl font-bold mb-4">Get in Touch</h2>
      <p class="text-muted-foreground mb-6">
        Interested in collaborating or have questions? Feel free to reach out!
      </p>
      <div class="inline-flex items-center justify-center mb-4">
        <Icon name="lucide:mail" class="h-5 w-5 mr-2 text-primary" />
        <span>dangkhoahuynh2511@gmail.com</span>
      </div>
      <div class="flex justify-center">
        <SocialIcons links={SOCIAL_LINKS} className="justify-center" />
      </div>
    </div>
  </Container>
</Layout>

<style>
  .text-gradient {
    background-image: linear-gradient(to right, var(--tw-gradient-from), var(--tw-gradient-to));
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    --tw-gradient-from: theme('colors.primary.DEFAULT');
    --tw-gradient-to: theme('colors.primary.DEFAULT' / 0.8);
  }
</style>
